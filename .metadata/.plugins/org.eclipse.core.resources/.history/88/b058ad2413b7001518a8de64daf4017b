package week5.friday.bank;

import java.io.FileNotFoundException;
import java.util.Map;

import week5.friday.bank.account.BankAccount;
import week5.friday.bank.database.Storage;
import week5.friday.bank.exception.ExceededInterestException;
import week5.friday.bank.exception.InsufficientAvailabilityException;

public class OnlineBanking {
	public static void main(String[] args) throws NumberFormatException,
			ExceededInterestException, InsufficientAvailabilityException,
			FileNotFoundException {

		// Map<Long, BankAccount> loadedAccounts = new HashMap<>();
		//
		Bank bank = new Bank();
		// for (Map.Entry<Long, BankAccount> entry : bank.accounts.entrySet()) {
		// System.out.println(entry.getValue());
		// }
		System.out.println(bank.getAccounts());
		bank.createBankAccount();
		// bank.createBankAccount();
		BankAccount account = bank.login();
		Storage.saveFile(bank.getAccounts());
		Storage.saveLastAccountId(bank.getLastAccountID());
		for (Map.Entry<Long, BankAccount> entry : bank.getAccounts().entrySet()) {
			System.out.println(entry.getValue());
		}
		while (!bank.logout()) {
			System.out
					.println("Press 1 to add Money\nPress 2 to withdrawn Money\nPress 3 to transfer\nPress 4 to logout");
			switch (Integer.parseInt(sc.nextLine().toLowerCase())) {
			case 1:
				bank.add(account, Integer.parseInt(sc.nextLine()));
				break;
			case 2:
				bank.withdraw(account, Double.parseDouble(sc.nextLine()));
				break;
			case 3:
				bank.transfer(account, Double.parseDouble(sc.nextLine()));
				break;
			default:
				bank.logout();
				break;
			}
		}
		System.out.println(account);
	}

}
